type Usuario @model @auth(rules: [{ allow: public }]) {
  id: ID!
  nickname: String!
  nombre: String
  materno: String
  paterno: String
  email: String!
  foto: String
  imagenFondo: String
  phoneNumber: String
  phoneCode: String
  organizador: Boolean
  admin: Boolean
  idUploaded: Boolean
  idData: AWSJSON
  idKey: String
  fechaNacimiento: String
  calificacion: Float
  numResenas: Int
  notificationToken: String
  Eventos: [Evento] @hasMany(indexName: "byUsuario", fields: ["id"])
  Reservas: [Reserva] @hasMany(indexName: "byUsuario", fields: ["id"])
}

type Evento @model @auth(rules: [{ allow: public }]) {
  id: ID!
  imagenes: [String!]!
  imagenPrincipalIDX: Int!
  titulo: String!
  detalles: String
  ubicacion: AWSJSON!
  fechaInicial: AWSTimestamp!
  fechaFinal: AWSTimestamp!
  tosAceptance: AWSJSON!
  tipoLugar: placeEnum!
  musica: musicEnum!
  comodities: [comoditiesEnum!]
  musOtra: String

  personasReservadas: Int
  personasMax: Int

  precioMin: Int!
  precioMax: Int!

  CreatorID: ID! @index(name: "byUsuario")

  Boletos: [Boleto!] @hasMany(indexName: "byEvento", fields: ["id"])
  Reservas: [Reserva!] @hasMany(indexName: "byEvento", fields: ["id"])
}

type Boleto @model @auth(rules: [{ allow: public }]) {
  id: ID!

  titulo: String!
  descripcion: String

  cantidad: Int!
  personasReservadas: Int

  precio: Float!

  eventoID: ID! @index(name: "byEvento")
  Reservas: [Reserva!] @hasMany(indexName: "byBoleto", fields: ["id"])
}

type Reserva @model @auth(rules: [{ allow: public }]) {
  id: ID!
  total: Float!
  precioIndividual: Float!
  comision: Float!
  pagadoAlOrganizador: Float!
  tituloBoleto: String!
  descripcionBoleto: String
  cantidad: Int!
  pagoID: String
  ingreso: Boolean
  horaIngreso: AWSDateTime
  cancelado: Boolean
  canceledAt: AWSDateTime
  cancelReason: reservaCancelReason

  eventoID: ID! @index(name: "byEvento")
  usuarioID: ID! @index(name: "byUsuario")
  boletoID: ID! @index(name: "byBoleto")

  organizadorID: ID
}

enum reservaCancelReason {
  EVENTOCERRADO
  CANCELADOPORCLIENTE
}

enum placeEnum {
  EXTERIOR
  INTERIOR
  MIXTO
}

enum musicEnum {
  REGGETON
  POP
  TECNO
  RAP
  BANDA
  ROCK
  OTRO
}

enum comoditiesEnum {
  DJ
  ALBERCA
  BARRALIBRE
  COMIDA
  SEGURIDAD
}
